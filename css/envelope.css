:root{
  --bg:#faf7f2;
  --ink:#1b1b1b;
}

/* ===== Fondo floral estático (solo visible antes de pintar el vídeo) ===== */
html, body { height: 100%; }
body{
  margin:0; color:var(--ink);
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
  min-height:100dvh;
  background-color:#faf7f2;
  background-image:
    linear-gradient(rgba(255,255,255,.08),rgba(255,255,255,.08)),
    url('../media/img/vertical_background.png');
  background-attachment:fixed; background-size:cover; background-position:center; background-repeat:no-repeat;
}
@media (orientation:landscape){
  body{ background-image:
    linear-gradient(rgba(255,255,255,.08),rgba(255,255,255,.08)),
    url('../media/img/landscape_background.png'); }
}

/* Bloquea scroll mientras reproduce (JS añade .no-scroll) */
body.no-scroll { overflow:hidden; height:100dvh; }

/* ===== Stage full-screen (mobile-first) ===== */
.envelope-stage{
  position: relative;
  width: 100vw;
  height: 100dvh;                 /* dvh corrige barras en iOS moderno */
  border-radius: 0;
  box-shadow: none;
  overflow: hidden;
  background: #000;               /* por si tarda en pintar el frame */
}

/* Vídeo cubriendo toda la pantalla */
.envelope-video{
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  object-fit: cover;
}

/* Botón Abrir centrado (respeta notch con safe-area) */
.video-play{
  position: absolute;
  left: 50%;
  top: calc(50% + env(safe-area-inset-top));
  transform: translate(-50%, -50%);
  z-index: 3;
  padding: .7rem 1rem;
  border-radius: 999px;
  border: 0;
  background: rgba(17,17,17,.9);
  color: #fff;
  font-weight: 700;
  cursor: pointer;
}
.video-play:hover{ opacity: .95; }

/* Botón Saltar en esquina superior derecha */
.skip-video{
  position: absolute;
  top: calc(10px + env(safe-area-inset-top));
  right: calc(10px + env(safe-area-inset-right));
  z-index: 4;
  padding: .45rem .7rem;
  border-radius: 10px;
  border: 0;
  background: rgba(0,0,0,.55);
  color: #fff;
  font-size: .95rem;
  cursor: pointer;
}
.skip-video:hover{ background: rgba(0,0,0,.75); }

/* Flash blanco para transición */
.whitefade{
  position: absolute; inset: 0;
  background: #fff;
  opacity: 0;
  transition: opacity 280ms ease;
  pointer-events: none;
  z-index: 5;
}

/* Carta overlay centrada */
.letter{
  position: absolute;
  inset: env(safe-area-inset-top) env(safe-area-inset-right)
         env(safe-area-inset-bottom) env(safe-area-inset-left);
  display: grid; place-items: center;
  padding: 20px;
  background: transparent;
  z-index: 6;
  opacity: 0; /* JS la muestra tras el vídeo */
}

/* Tarjeta visual */
.letter__inner{
  max-width: 560px;
  width: min(92vw, 560px);
  text-align: center;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 10px 28px rgba(0,0,0,.16);
  padding: 20px 18px;
  opacity: 0; /* fade-in por JS */
}

/* Estados del stage */
.envelope-stage.is-playing .video-play{ display: none; }
.envelope-stage.is-done .envelope-video{ display: none; }

@media (prefers-reduced-motion: reduce){
  .envelope-video, .video-play, .skip-video { display: none !important; }
}

/* Tipografía de la carta */
.title{ font-size: 1.95rem; margin: 0 0 10px; }
.who{ font-size: 1.1rem; margin: 8px 0 16px; }
.meta{ color: #5b5b5b; }
@media (max-width: 420px){
  .title{ font-size: 1.7rem; }
  .who{ font-size: 1rem; }
}
